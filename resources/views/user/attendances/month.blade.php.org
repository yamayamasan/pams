@extends('layouts.app')

@section('content')
<div class="container">
  <div class="row">
    <div class="col-md-2">
      @include('components.attendance_month_nav')
    </div>
    <div class="col-md-8">
      <div class="panel panel-default">
        <div class="panel-heading">Dashboard</div>

        <table class="table">
          <thead>
            <tr>
              <th>date</th>
              <th>state</th>
              <th>begin</th>
              <th>end</th>
              <th>break</th>
              <th>work</th>
              <th>edit</th>
              {{-- <th>update</th> --}}
            </tr>
          </thead>
          <tbody>
            @foreach ($dateList as $dateData)
            <tr @if ($dateData['is_holiday']) class="danger" @endif>
              <td>{{ $dateData['date_at'] }}({{ $dateData['dotweek'] }})</td>
              <td>{{ $dateData['work_state'] ?? '-'}}</td>
              <td>{{ fmt_time($dateData['begin_time']) ?? '-'}}</td>
              <td>{{ fmt_time($dateData['end_time'])  ?? '-'}}</td>
              <td>{{ fmt_time($dateData['break_time'])  ?? '-'}}</td>
              <td>
                {{ $dateData['work_time']  ?? '-'}}
                @if (empty($dateData['work_time']) && !is_null($dateData['fore_work_time']))
                ({{ $dateData['fore_work_time'] }})
                @endif
              </td>
              <td>
                <a href="/attendances/day/{{ date_to_url($dateData['date_at']) }}/">edit</a>
              </td>
            </tr>
            @endforeach
          </tbody>
        </table>
      </div>

      <div class="panel panel-default">
        @if (!empty($monthSummary))
        <form action="/attendances/update/month_summary/status_close/{{ $monthSummary->uuid }}" method="post">
          {{ csrf_field() }}
          <button type="submit" class="btn btn-default">Close</button>
        </form>
        @endif
        {{-- monthly summary--}}
        <blockquote>
          <p>Total Work Time: {{ $monthSummary->total_work_time ?? '-'}}</p>
          <p>Avg Work Time Day: {{ $monthSummary->avg_work_time_day ?? '-'}}</p>
          <p>Total Work Day Count: {{ $monthSummary->total_work_day_count ?? '-'}}</p>
          <p>Force Total Work Time: {{ $assumedWorkingHour ?? '-'}}</p>

          <p>Remaining </p>
        </blockquote>
      </div>

    </div>
  </div>
</div>
@endsection
